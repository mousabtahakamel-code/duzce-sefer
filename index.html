<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Düzce Ulaşım - Giriş</title>
<style>
body{
  font-family:Arial;
  background:#1e40af;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  background:white;
  padding:25px;
  width:320px;
  border-radius:10px;
}
input,button{
  width:100%;
  padding:10px;
  margin-top:10px;
}
button{
  background:#2563eb;
  color:white;
  border:none;
}
.link{
  margin-top:10px;
  text-align:center;
  color:#2563eb;
  cursor:pointer;
}
#msg{
  text-align:center;
  margin-top:10px;
  color:red;
}
</style>
</head>
<body>

<div class="card" id="loginBox">
  <h3>Giriş</h3>
  <input id="l_user" placeholder="Kullanıcı adı">
  <input id="l_pin" type="password" placeholder="PIN">
  <button type="button" onclick="login()">Giriş Yap</button>
  <div class="link" onclick="showSignup()">Şoför kayıt ol</div>
  <div id="msg"></div>
</div>

<div class="card" id="signupBox" style="display:none">
  <h3>Şoför Kayıt</h3>
  <input id="s_user" placeholder="Kullanıcı adı">
  <input id="s_pin" type="password" placeholder="PIN">
  <button type="button" onclick="signup()">Kayıt Ol</button>
  <div class="link" onclick="showLogin()">Girişe dön</div>
  <div id="smsg"></div>
</div>

<script>
// ilk kurulum
if(!localStorage.getItem("users")){
  localStorage.setItem("users", JSON.stringify([
    {user:"amir", pin:"1234", role:"amir"},
    {user:"sofor", pin:"1111", role:"sofor"}
  ]));
}
if(!localStorage.getItem("seferler")){
  localStorage.setItem("seferler","[]");
}

// ekran geçişleri
function showSignup(){
  loginBox.style.display="none";
  signupBox.style.display="block";
}
function showLogin(){
  signupBox.style.display="none";
  loginBox.style.display="block";
}

// LOGIN
function login(){
  const u=l_user.value.trim();
  const p=l_pin.value.trim();
  const users=JSON.parse(localStorage.getItem("users"));
  const found=users.find(x=>x.user===u && x.pin===p);

  if(!found){
    msg.innerText="❌ Hatalı giriş";
    return;
  }
  localStorage.setItem("aktif",JSON.stringify(found));
  location.href = found.role==="amir" ? "amir.html" : "sofor.html";
}

// SIGN UP (SADECE ŞOFÖR)
function signup(){
  const u=s_user.value.trim();
  const p=s_pin.value.trim();
  const smsg=document.getElementById("smsg");

  if(!u || !p){
    smsg.innerText="❌ Boş alan var";
    return;
  }

  let users=JSON.parse(localStorage.getItem("users"));
  if(users.find(x=>x.user===u)){
    smsg.innerText="❌ Kullanıcı adı alınmış";
    return;
  }

  users.push({user:u,pin:p,role:"sofor"});
  localStorage.setItem("users",JSON.stringify(users));
  smsg.style.color="green";
  smsg.innerText="✅ Kayıt başarılı, giriş yapabilirsin";

  s_user.value="";
  s_pin.value="";
}
</script>

</body>
</html>




