<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Şoför</title>
<style>
body{font-family:Arial;background:#f8fafc;padding:20px}
.card{background:white;padding:10px;margin-bottom:10px}
</style>
</head>
<body>

<h3>Şoför Paneli</h3>
<div id="g"></div>
<div id="d"></div>
<button onclick="cikis()">Çıkış</button>

<script>
const aktif=JSON.parse(localStorage.getItem("aktif"));
let seferler=JSON.parse(localStorage.getItem("seferler"));

function render(){
  g.innerHTML="<h4>Gidiş</h4>";
  d.innerHTML="<h4>Dönüş</h4>";
  seferler.filter(x=>x.sofor===aktif.user).forEach((s,i)=>{
    const div=`<div class="card">
      ${s.hat}<br>${s.arac}<br>${s.saat}<br>${s.durum}
      <button onclick="yap(${i})">Yapıldı</button>
    </div>`;
    s.yon==="Gidiş"?g.innerHTML+=div:d.innerHTML+=div;
  });
}

function yap(i){
  seferler[i].durum="Yapıldı";
  localStorage.setItem("seferler",JSON.stringify(seferler));
  render();
}

function cikis(){
  localStorage.removeItem("aktif");
  location.href="index.html";
}
render();
</script>

</body>
</html>

